apiVersion: v1
kind: ConfigMap
metadata:
  name: authelia-cm
data:
  configuration.yaml: |
    ---
    theme: light
    jwt_secret: 'secret'
    server: 
      host: 0.0.0.0
      port: 9091
    log:
      level: debug
    default_redirection_url: https://auth.intropin.be
    totp:
      issuer: authelia.com
    authentication_backend:
      file:
        path: /config/users_database.yaml
        password:
          algorithm: argon2id
          iterations: 1
          salt_length: 16
          parallelism: 8
          memory: 64
    access_control:
      default_policy: one_factor
      rules:
        - domain: home-assistant.intropin.be
          policy: one_factor
    identity_providers:
      oidc:
        cors:
          endpoints: ['authorization', 'token', 'revocation', 'introspection']
          allowed_origins_from_client_redirect_uris: true
        issuer_private_key: |
          -----BEGIN PRIVATE KEY-----
          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
          MxCqF3sufjZhfp3gqfNuY9f1MloDng==
          -----END PRIVATE KEY-----
        clients:
        - id: argocd
          description: Argo CD
          secret: '$pbkdf2-sha512$310000$c8p78n7pUMln0jzvd4aK4Q$JNRBzwAo0ek5qKn50cFzzvE9RXV88h1wJn5KGiHrD0YKtZaR/nCb2CJPOsKaPK0hjf.9yHxzQGZziziccp6Yng'  # The digest of 'insecure_secret'.
          public: false
          authorization_policy: one_factor
          redirect_uris:
            - https://argocd.intropin.be/auth/callback
          scopes:
            - openid
            - groups
            - email
            - profile
          userinfo_signing_algorithm: none
    session:
      name: authelia_session
      # This secret can also be set using the env variables AUTHELIA_SESSION_SECRET_FILE
      secret: unsecure_session_secret
      expiration: 3600  # 1 hour
      inactivity: 300  # 5 minutes
      domain: intropin.be # Should match whatever your root protected domain is
    regulation:
      max_retries: 3
      find_time: 120
      ban_time: 300
    storage:
     encryption_key: a_very_important_secret # Now required
     local:
       path: /config/db.sqlite3
    notifier:
      filesystem:
        filename: /config/notification.txt
